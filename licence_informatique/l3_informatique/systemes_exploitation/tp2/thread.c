#include <sys/types.h> // pour pid_t
#include <unistd.h> // pour fork()
#include <stdio.h> // pour printf
#include <stdlib.h> // exit
#include <sys/wait.h> // pour wait()
#include <pthread.h> // pour thread
#define MAX 1000000000
static unsigned long long a=0;

void *count(void *arg) {
    volatile unsigned long long*var = (unsigned long
    long*) arg;
    volatile unsigned long long i;
    for (i = 0; i < MAX; i++)
        *var = *var + 1;
    return NULL;
}

// int pthread_create(pthread_t *thread, pthread_attr_t *attr, void *nomfonction, void *arg);

// int pthread_join(pthread_t *thid, void **retour);

// void pthread_exit(void *retour);

// void pthread_cancel(pthread_t tid);

// void pthread_detach(pthread_t thread);

int main() {
    pthread_t thread1;
    pthread_t thread2;

    pthread_create(&thread1,NULL,count,&a);
    printf (" pid thread1 : %d\n",getpid());
    pthread_join(thread1,NULL);
    pthread_create(&thread2,NULL,count,&a);
    printf (" pid thread2 : %d",getpid());
    pthread_join(thread2,NULL);

    printf("\n\na : %lld \n",a);
    return 0;
}