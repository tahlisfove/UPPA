#include <sys/types.h> // pour pid_t
#include <unistd.h> // pour fork()
#include <stdio.h> // pour printf

int main() {
    pid_t fils_pid;

    // boucle affichant le nombre de fils demandée
    for(int i=0; i<nbf; i++) {
        switch (fils_pid=fork()) {
        case -1: // échec du fork 
            fprintf(stderr, "échec du fork \n");
            perror("fork");
            exit(-1);
        case 0: // code du fils
            printf("mon pid est : %d et le pid pere est : %d \n", getpid(), getppid());
            execvp (prog, args);
            exit(0);
        default: // code du père 
            printf("%d : je suis le père, création du fils réussie\n", getpid());
        }
        // affiche le pid du fils qui vient de se terminer
        while((fils_pid=wait(NULL))>0)
            printf("fin du fils %d \n\n", fils_pid);        
    }
    // sleep(5); laisse le programme tourner pour afficher les zombies
    return 0;
}