#include <sys/types.h> // pour pid_t
#include <unistd.h> // pour fork()
#include <stdio.h> // pour printf
#include <stdlib.h> // exit
#include <sys/wait.h> // pour wait()
#include <sys/shm.h> // pour shm
#include <signal.h> // pour signaux

static void action (int sig) {
    printf("Signal reçu\n");
}

int main() {
    pid_t fils_pid;
    int nbf;
        switch (fils_pid=fork()) {
        case -1: // échec du fork 
            fprintf(stderr, "échec du fork \n");
            perror("fork");
            exit(-1);
        case 0: // code du fils
            printf("mon pid est : %d et le pid pere est : %d \n", getpid(), getppid());
            signal(SIGUSR1,action);
            pause();
            exit(0);
        default: // code du père 
            printf("%d : je suis le père, création du fils réussie\n", getpid());
            signal(SIGUSR1,action);
            sleep(3);
            kill(fils_pid,SIGUSR1);
        }
    sleep(4); //laisse le programme tourner pour afficher les zombies
    return 0;
}
